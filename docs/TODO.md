# CG Town 작업 목록

> 최종 업데이트: 2026-02-09

---

## P0 — 지금 당장 (기반 작업)

### 맵/UI
| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 1 | 타일맵 꾸미기 (Sprout Lands 에셋 적용) | TODO | Tiled 에디터로 배경/오브젝트 배치, 현재 grass/river만 있음 |
| 2 | 충돌 레이어 설정 (벽, 물, 오브젝트) | TODO | 타일맵에 collision 레이어 추가 |

### 유저/세션
| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 3 | 로그아웃 기능 | TODO | 현재 로그인/회원가입만 존재, 세션 정책 없음 |
| 4 | 관리자 일괄 등록 방안 | TODO | 30명 수동 등록 불가능. Supabase CSV 업로드 + 이미지 일괄 업로드 스크립트 필요 |
| 5 | 캐릭터 머리 위 상태 텍스트 | TODO | DB에 `status_message` 컬럼 추가, Phaser 텍스트로 표시 |

---

## P1 — 중요 (핵심 기능)

### 도감 개선
| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 6 | 포켓몬 스타일 게임 UI | TODO | 도감 목록/상세 디자인 전면 개편 |
| 7 | 부서별 필터/그룹 | TODO | 도감 목록을 부서 탭으로 분류해서 표시 |
| 8 | 기술스택 다중선택 | TODO | 태그 선택 + 직접 입력 혼합 방식 |
| 9 | 프로젝트 다중선택 | TODO | 현재 단일 텍스트 → 다중 선택으로 변경 |
| 10 | 분야 → 직급 변경 검토 | TODO | 인사카드 성격이므로 직급/직책을 관리자가 일괄 입력하는 게 적절할 수 있음 |
| 11 | 상태 입력 (휴가/외근/파견 등) | TODO | 프로필에 상태 필드 추가, 도감+게임 내 표시 |

### NPC
| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 12 | NPC 관리 방식 결정 | TODO | 회원 테이블에 `is_npc` 플래그 vs 별도 테이블 |
| 13 | 지식베이스 구축 + RAG | TODO | 온보딩 문서 기반, LangGraph/LangChain 활용 |
| 14 | RAG 테스트 페이지 | TODO | 지식 입력 → 즉시 RAG 질의 테스트할 수 있는 어드민 페이지 |
| 15 | 정형데이터 질의 (TAG) | TODO | "서비스 개발 몇 명이야?" 같은 질문은 RAG 없이 DB 직접 조회 (Text-to-SQL 또는 사전 정의 쿼리) |
| 16 | NPC 채팅 UI | TODO | 게임 내 채팅창 여닫기, NPC 근처에서 대화 시작 |
| 17 | 입사 서류 다운로드 | TODO | NPC가 안내 + 파일 다운로드 링크 제공 |

---

## P2 — 보통 (테스트/프로토타입)

| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 18 | 테스트 개발 폴더 구조 | TODO | `tests/` 폴더 생성, 기능별 프로토타입 분리 |
| 19 | 회의실 자동예약 기능 | TODO | 프로토타입 우선 |
| 20 | 오늘 식당 메뉴 스크래핑 | TODO | NPC 말풍선에 오늘의 메뉴 표시 |
| 21 | NPC 말풍선 (공지/메뉴) | TODO | NPC가 주기적으로 공지사항이나 식당 메뉴를 읊음 |
| 22 | Phaser 스프라이트시트 애니메이션 | TODO | 현재 개별 이미지 → 걷기 애니메이션 적용 |
| 23 | 기존 React 캐릭터 컴포넌트 삭제 | TODO | Character.tsx, RemoteCharacter.tsx 정리 |

---

## P3 — 추후 개발

| # | 작업 | 상태 | 비고 |
|---|------|------|------|
| 24 | 인접 채팅 | TODO | 플레이어 간 일정 거리 이내에서만 채팅 가능 |
| 25 | 담타존 | TODO | 어두운 UI, 익명 채팅, 건의사항 남기기 |
| 26 | CG's Notes | TODO | 개인별 업무 노트 모아보기, 노션 연동 검토, 따봉 기능 |
| 27 | 공지사항 연동 (hiworks) | TODO | 나중에 hiworks API 연동 시 구현 |
| 28 | 45도 포즈 | TODO | 캐릭터 대각선 방향 이미지 |
| 29 | 아이디어 수집 체계 | TODO | 팀원 아이디어 모아보는 기능 |

---

## 열린 질문

| 주제 | 질문 | 현재 방향 |
|------|------|-----------|
| 분야 vs 직급 | `field` 컬럼을 유지할지, `position`(직급)으로 바꿀지 | 인사카드 성격이므로 직급을 관리자가 일괄 입력하는 게 나을 수 있음 |
| NPC 관리 | 회원 테이블에 `is_npc` vs 별도 `npcs` 테이블 | 회원으로 간주하면 도감에도 표시 가능, 별도 관리하면 로직 분리 깔끔 |
| 정형데이터 질의 | RAG vs TAG (DB 직접 조회) | 단순 집계(몇 명, 누구)는 TAG, 문서 기반 답변은 RAG로 하이브리드 |
| 일괄 등록 | 30명 등록 간편화 방안 | Supabase CSV import + 이미지 일괄 업로드 스크립트 조합 |

---

## 완료된 작업

- [x] 프로젝트 세팅 (Next.js + FastAPI + Supabase)
- [x] JWT 인증 미들웨어
- [x] WebSocket 실시간 멀티플레이어
- [x] 타일 기반 그리드 이동 (64px, 24x12)
- [x] 랜덤 스폰 + 충돌 감지
- [x] 캐릭터 이름 표시
- [x] 방향 포즈 유지 + Space키 default 포즈
- [x] 위치 저장/복원 (user_metadata)
- [x] 비밀번호 재설정
- [x] Phaser.js 마이그레이션 (PhaserGame, EventBus, Tween 보간)
- [x] 직원 도감 기본 구현 (/dogam, /dogam/[id], /dogam/edit)
- [x] Supabase Storage 캐릭터 이미지 (email prefix 기반 URL)
- [x] 프로필 API (GET/PUT)
- [x] DB 스키마 확장 (tech_stack, field, project, tmi)
- [x] 에셋팩 추가 (Sprout Lands, Forest)
